{"ast":null,"code":"import _slicedToArray from \"/home/daniel/Documents/Projetos/Software/Web/Reactjs/leigo_store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/daniel/Documents/Projetos/Software/Web/Reactjs/leigo_store/src/components/List/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addToCart, removeOneFromCart, removeFromCart } from \"../../store/modules/cart/actions\";\nimport Content from \"../Content\";\nimport { Container, Search, Icon, Input, WrapperMenu, Menu, Label, WrapperList, Item, Name, Controller, Minus, Count, Plus, Trash, Board, Photo, Price } from \"./styles\";\n\nfunction List({\n  noFilters,\n  products,\n  topList\n}) {\n  const _useState = useState(\"Todos\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        nav = _useState2[0],\n        setNav = _useState2[1];\n\n  const _useState3 = useState(products),\n        _useState4 = _slicedToArray(_useState3, 2),\n        filtered = _useState4[0],\n        setFiltered = _useState4[1];\n\n  const _useState5 = useState(products.lenght),\n        _useState6 = _slicedToArray(_useState5, 2),\n        length = _useState6[0],\n        setLenght = _useState6[1];\n\n  const categoriesState = useSelector(state => state.productCategories.categories);\n  const categories = categoriesState.map(item => {\n    const founded = products.find(product => item.product_id_fk === product.id);\n    if (item.category === \"Todos\") return item.category;\n    if (founded && founded.stock > 0) return item.category;\n  });\n  const productsOnCart = useSelector(state => state.cart.products);\n  useEffect(() => {\n    if (products.length !== length) {\n      setLenght(filtered.length);\n      setFiltered(products);\n    }\n  }, [products]);\n  const dispatch = useDispatch();\n\n  function selectCategorie(event) {\n    const tab = event.target.innerHTML;\n    setNav(tab);\n\n    if (tab !== \"Todos\") {\n      const filter = products.filter(item => item.category.category === tab);\n      setFiltered(filter);\n    } else setFiltered(products);\n  }\n\n  function searchProduct(term) {\n    if (term.length > 0) _.debounce(() => search(term), 500)();else setFiltered(products);\n  }\n\n  function search(term) {\n    const filter = products.filter(product => product.name.toLowerCase().includes(term.toLowerCase()));\n    setFiltered(filter);\n  }\n\n  function renderLabel(name) {\n    const selected = categories.find(item => item === nav);\n    if (name === selected) return React.createElement(Label, {\n      onClick: selectCategorie,\n      selected: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, name);\n    return React.createElement(Label, {\n      onClick: selectCategorie,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, name);\n  }\n\n  function renderItem(product) {\n    const onCart = productsOnCart.find(item => item.id === product.id);\n    const price = product.unit_price.toLocaleString(\"pt-BR\", {\n      style: \"currency\",\n      currency: \"BRL\"\n    });\n\n    if (product.stock > 0) {\n      return React.createElement(Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Board, {\n        to: \"/product/\".concat(product.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Photo, {\n        imageSmall: product.image_small,\n        src: product.image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(Price, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, price)), React.createElement(Name, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, product.name), React.createElement(Controller, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Minus, {\n        onClick: () => dispatch(removeOneFromCart(product)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(Count, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, onCart ? onCart.amount : 0), React.createElement(Plus, {\n        onClick: () => dispatch(addToCart(product)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), React.createElement(Trash, {\n        onClick: () => dispatch(removeFromCart(product)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })));\n    }\n  }\n\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(Content, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, !noFilters && React.createElement(React.Fragment, null, React.createElement(Search, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(Input, {\n    placeholder: \"Filtrar\",\n    onChange: event => searchProduct(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }), React.createElement(Icon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  })), React.createElement(WrapperMenu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, categories.map(name => renderLabel(name))))), React.createElement(WrapperList, {\n    top: topList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, filtered.map(product => renderItem(product)))));\n}\n\nList.propTypes = {\n  products: PropTypes.array,\n  noFilters: PropTypes.bool,\n  topList: PropTypes.number\n};\nList.defaultProps = {\n  products: [],\n  noFilters: false,\n  topList: 150\n};\nexport default List;","map":{"version":3,"sources":["/home/daniel/Documents/Projetos/Software/Web/Reactjs/leigo_store/src/components/List/index.js"],"names":["React","useState","useEffect","PropTypes","_","useDispatch","useSelector","addToCart","removeOneFromCart","removeFromCart","Content","Container","Search","Icon","Input","WrapperMenu","Menu","Label","WrapperList","Item","Name","Controller","Minus","Count","Plus","Trash","Board","Photo","Price","List","noFilters","products","topList","nav","setNav","filtered","setFiltered","lenght","length","setLenght","categoriesState","state","productCategories","categories","map","item","founded","find","product","product_id_fk","id","category","stock","productsOnCart","cart","dispatch","selectCategorie","event","tab","target","innerHTML","filter","searchProduct","term","debounce","search","name","toLowerCase","includes","renderLabel","selected","renderItem","onCart","price","unit_price","toLocaleString","style","currency","image_small","image","amount","value","propTypes","array","bool","number","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport {\n  addToCart,\n  removeOneFromCart,\n  removeFromCart,\n} from \"../../store/modules/cart/actions\";\n\nimport Content from \"../Content\";\nimport {\n  Container,\n  Search,\n  Icon,\n  Input,\n  WrapperMenu,\n  Menu,\n  Label,\n  WrapperList,\n  Item,\n  Name,\n  Controller,\n  Minus,\n  Count,\n  Plus,\n  Trash,\n  Board,\n  Photo,\n  Price,\n} from \"./styles\";\n\nfunction List({ noFilters, products, topList }) {\n  const [nav, setNav] = useState(\"Todos\");\n  const [filtered, setFiltered] = useState(products);\n  const [length, setLenght] = useState(products.lenght);\n\n  const categoriesState = useSelector(\n    (state) => state.productCategories.categories\n  );\n\n  const categories = categoriesState.map((item) => {\n    const founded = products.find(\n      (product) => item.product_id_fk === product.id\n    );\n\n    if (item.category === \"Todos\") return item.category;\n    if (founded && founded.stock > 0) return item.category;\n  });\n\n  const productsOnCart = useSelector((state) => state.cart.products);\n\n  useEffect(() => {\n    if (products.length !== length) {\n      setLenght(filtered.length);\n      setFiltered(products);\n    }\n  }, [products]);\n\n  const dispatch = useDispatch();\n\n  function selectCategorie(event) {\n    const tab = event.target.innerHTML;\n\n    setNav(tab);\n\n    if (tab !== \"Todos\") {\n      const filter = products.filter((item) => item.category.category === tab);\n      setFiltered(filter);\n    } else setFiltered(products);\n  }\n\n  function searchProduct(term) {\n    if (term.length > 0) _.debounce(() => search(term), 500)();\n    else setFiltered(products);\n  }\n\n  function search(term) {\n    const filter = products.filter((product) =>\n      product.name.toLowerCase().includes(term.toLowerCase())\n    );\n    setFiltered(filter);\n  }\n\n  function renderLabel(name) {\n    const selected = categories.find((item) => item === nav);\n\n    if (name === selected)\n      return (\n        <Label onClick={selectCategorie} selected>\n          {name}\n        </Label>\n      );\n\n    return <Label onClick={selectCategorie}>{name}</Label>;\n  }\n\n  function renderItem(product) {\n    const onCart = productsOnCart.find((item) => item.id === product.id);\n    const price = product.unit_price.toLocaleString(\"pt-BR\", {\n      style: \"currency\",\n      currency: \"BRL\",\n    });\n\n    if (product.stock > 0) {\n      return (\n        <Item>\n          <Board to={`/product/${product.id}`}>\n            <Photo imageSmall={product.image_small} src={product.image} />\n            <Price>{price}</Price>\n          </Board>\n          <Name>{product.name}</Name>\n          <Controller>\n            <Minus onClick={() => dispatch(removeOneFromCart(product))} />\n            <Count>{onCart ? onCart.amount : 0}</Count>\n            <Plus onClick={() => dispatch(addToCart(product))} />\n            <Trash onClick={() => dispatch(removeFromCart(product))} />\n          </Controller>\n        </Item>\n      );\n    }\n  }\n\n  return (\n    <Container>\n      <Content>\n        {!noFilters && (\n          <>\n            <Search>\n              <Input\n                placeholder=\"Filtrar\"\n                onChange={(event) => searchProduct(event.target.value)}\n              />\n              <Icon />\n            </Search>\n            <WrapperMenu>\n              <Menu>{categories.map((name) => renderLabel(name))}</Menu>\n            </WrapperMenu>\n          </>\n        )}\n        <WrapperList top={topList}>\n          {filtered.map((product) => renderItem(product))}\n        </WrapperList>\n      </Content>\n    </Container>\n  );\n}\n\nList.propTypes = {\n  products: PropTypes.array,\n  noFilters: PropTypes.bool,\n  topList: PropTypes.number,\n};\n\nList.defaultProps = {\n  products: [],\n  noFilters: false,\n  topList: 150,\n};\n\nexport default List;\n"]},"metadata":{},"sourceType":"module"}