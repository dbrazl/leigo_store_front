{"ast":null,"code":"import { takeLatest, put, call, all, race, select } from \"redux-saga/effects\";\nimport api from \"../../../services/api\";\nimport { updateUserSuccess, updateAvatarSuccess, userFailure, inactiveUserSuccess } from \"./actions\";\nimport errorHandler from \"../utils/errorHandler\";\nimport timer from \"../utils/timer\";\n\nfunction* updateAvatar({\n  payload\n}) {\n  try {\n    const file = payload.file;\n    console.log(file);\n    const formData = new FormData();\n    formData.append(\"file\", {\n      uri: window.URL.createObjectURL(fileObj),\n      type: file.type,\n      name: file.fileName\n    });\n\n    const _ref = yield race({\n      response: call(api.post, \"/avatar\", formData),\n      timeout: call(timer)\n    }),\n          response = _ref.response;\n\n    yield put(updateAvatarSuccess(response.body));\n  } catch (error) {\n    yield errorHandler(error, userFailure);\n  }\n}\n\nfunction* updateUser({\n  payload\n}) {\n  try {\n    const body = payload.body;\n\n    const _ref2 = yield race({\n      response: call(api.put, \"/user\", body),\n      timeout: call(timer)\n    }),\n          response = _ref2.response;\n\n    yield put(updateUserSuccess(response.data));\n  } catch (error) {\n    console.tron.log(error);\n    yield errorHandler(error, userFailure);\n  }\n}\n\nfunction* inactive() {\n  try {\n    const username = yield select(state => state.user.profile.username);\n    yield race({\n      response: call(api.put, \"/user/inactive/\".concat(username)),\n      timeout: call(timer)\n    });\n    yield put(inactiveUserSuccess());\n  } catch (error) {\n    yield errorHandler(error, userFailure);\n  }\n}\n\nexport default all([takeLatest(\"@user/UPDATE_AVATAR_REQUEST\", updateAvatar), takeLatest(\"@user/UPDATE_USER_REQUEST\", updateUser), takeLatest(\"@user/INACTIVE_USER_REQUEST\", inactive)]);","map":{"version":3,"sources":["/home/daniel/Documents/Projetos/Software/Web/Reactjs/leigo_store/src/store/modules/user/saga.js"],"names":["takeLatest","put","call","all","race","select","api","updateUserSuccess","updateAvatarSuccess","userFailure","inactiveUserSuccess","errorHandler","timer","updateAvatar","payload","file","console","log","formData","FormData","append","uri","window","URL","createObjectURL","fileObj","type","name","fileName","response","post","timeout","body","error","updateUser","data","tron","inactive","username","state","user","profile"],"mappings":"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","sourcesContent":["import { takeLatest, put, call, all, race, select } from \"redux-saga/effects\";\nimport api from \"../../../services/api\";\n\nimport {\n  updateUserSuccess,\n  updateAvatarSuccess,\n  userFailure,\n  inactiveUserSuccess,\n} from \"./actions\";\n\nimport errorHandler from \"../utils/errorHandler\";\nimport timer from \"../utils/timer\";\n\nfunction* updateAvatar({ payload }) {\n  try {\n    const { file } = payload;\n\n    console.log(file);\n    const formData = new FormData();\n    formData.append(\"file\", {\n      uri: window.URL.createObjectURL(fileObj),\n      type: file.type,\n      name: file.fileName,\n    });\n\n    const { response } = yield race({\n      response: call(api.post, \"/avatar\", formData),\n      timeout: call(timer),\n    });\n\n    yield put(updateAvatarSuccess(response.body));\n  } catch (error) {\n    yield errorHandler(error, userFailure);\n  }\n}\n\nfunction* updateUser({ payload }) {\n  try {\n    const { body } = payload;\n\n    const { response } = yield race({\n      response: call(api.put, \"/user\", body),\n      timeout: call(timer),\n    });\n\n    yield put(updateUserSuccess(response.data));\n  } catch (error) {\n    console.tron.log(error);\n    yield errorHandler(error, userFailure);\n  }\n}\n\nfunction* inactive() {\n  try {\n    const username = yield select((state) => state.user.profile.username);\n\n    yield race({\n      response: call(api.put, `/user/inactive/${username}`),\n      timeout: call(timer),\n    });\n\n    yield put(inactiveUserSuccess());\n  } catch (error) {\n    yield errorHandler(error, userFailure);\n  }\n}\n\nexport default all([\n  takeLatest(\"@user/UPDATE_AVATAR_REQUEST\", updateAvatar),\n  takeLatest(\"@user/UPDATE_USER_REQUEST\", updateUser),\n  takeLatest(\"@user/INACTIVE_USER_REQUEST\", inactive),\n]);\n"]},"metadata":{},"sourceType":"module"}