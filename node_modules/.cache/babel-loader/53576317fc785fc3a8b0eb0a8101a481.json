{"ast":null,"code":"import produce from \"immer\";\nimport _ from \"lodash\";\nconst INITIAL_STATE = {\n  products: []\n};\nexport default function cart(state = INITIAL_STATE, action) {\n  return produce(state, draft => {\n    switch (action.type) {\n      case \"@cart/ADD_TO_CART\":\n        let oneAdd = state.products.find(item => item.id === action.payload.item.id);\n\n        if (!!oneAdd) {\n          oneAdd.amount++;\n\n          const unionAdd = _.unionBy([oneAdd], state.products, \"id\");\n\n          draft.products = _.orderBy(unionAdd, [\"name\"], [\"asc\"]);\n        } else {\n          const unionAdd = _.unionBy([action.payload.item], state.products, \"id\");\n\n          draft.products = _.orderBy(unionAdd, [\"name\"], [\"asc\"]);\n        }\n\n        break;\n\n      case \"@cart/REMOVE_ONE_FROM_CART\":\n        let oneRemove = state.products.find(item => item.id === action.payload.item.id);\n\n        if (!!oneRemove && oneRemove.amount > 0) {\n          oneRemove.amount--;\n\n          const unionRemoveOne = _.unionBy([oneRemove], state.products, \"id\");\n\n          draft.products = _.orderBy(unionRemoveOne, [\"name\"], [\"asc\"]);\n        } else {\n          draft.products = _.differenceBy(state.products, [action.payload.item], \"id\");\n        }\n\n        break;\n\n      case \"@cart/REMOVE_FROM_CART\":\n        const one = state.products.find(item => item.id === action.payload.item.id);\n        if (!!one) draft.products = _.differenceBy(state.products, [action.payload.item], \"id\");\n        break;\n\n      default:\n    }\n  });\n}","map":{"version":3,"sources":["/home/daniel/Documents/Projetos/Software/Web/Reactjs/leigo_store/src/store/modules/cart/reducer.js"],"names":["produce","_","INITIAL_STATE","products","cart","state","action","draft","type","oneAdd","find","item","id","payload","amount","unionAdd","unionBy","orderBy","oneRemove","unionRemoveOne","differenceBy","one"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,OAApB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,QAAQ,EAAE;AADU,CAAtB;AAIA,eAAe,SAASC,IAAT,CAAcC,KAAK,GAAGH,aAAtB,EAAqCI,MAArC,EAA6C;AAC1D,SAAON,OAAO,CAACK,KAAD,EAASE,KAAD,IAAW;AAC/B,YAAQD,MAAM,CAACE,IAAf;AACE,WAAK,mBAAL;AACE,YAAIC,MAAM,GAAGJ,KAAK,CAACF,QAAN,CAAeO,IAAf,CACVC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACO,OAAP,CAAeF,IAAf,CAAoBC,EAD/B,CAAb;;AAIA,YAAI,CAAC,CAACH,MAAN,EAAc;AACZA,UAAAA,MAAM,CAACK,MAAP;;AACA,gBAAMC,QAAQ,GAAGd,CAAC,CAACe,OAAF,CAAU,CAACP,MAAD,CAAV,EAAoBJ,KAAK,CAACF,QAA1B,EAAoC,IAApC,CAAjB;;AACAI,UAAAA,KAAK,CAACJ,QAAN,GAAiBF,CAAC,CAACgB,OAAF,CAAUF,QAAV,EAAoB,CAAC,MAAD,CAApB,EAA8B,CAAC,KAAD,CAA9B,CAAjB;AACD,SAJD,MAIO;AACL,gBAAMA,QAAQ,GAAGd,CAAC,CAACe,OAAF,CACf,CAACV,MAAM,CAACO,OAAP,CAAeF,IAAhB,CADe,EAEfN,KAAK,CAACF,QAFS,EAGf,IAHe,CAAjB;;AAKAI,UAAAA,KAAK,CAACJ,QAAN,GAAiBF,CAAC,CAACgB,OAAF,CAAUF,QAAV,EAAoB,CAAC,MAAD,CAApB,EAA8B,CAAC,KAAD,CAA9B,CAAjB;AACD;;AACD;;AAEF,WAAK,4BAAL;AACE,YAAIG,SAAS,GAAGb,KAAK,CAACF,QAAN,CAAeO,IAAf,CACbC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACO,OAAP,CAAeF,IAAf,CAAoBC,EAD5B,CAAhB;;AAIA,YAAI,CAAC,CAACM,SAAF,IAAeA,SAAS,CAACJ,MAAV,GAAmB,CAAtC,EAAyC;AACvCI,UAAAA,SAAS,CAACJ,MAAV;;AACA,gBAAMK,cAAc,GAAGlB,CAAC,CAACe,OAAF,CAAU,CAACE,SAAD,CAAV,EAAuBb,KAAK,CAACF,QAA7B,EAAuC,IAAvC,CAAvB;;AACAI,UAAAA,KAAK,CAACJ,QAAN,GAAiBF,CAAC,CAACgB,OAAF,CAAUE,cAAV,EAA0B,CAAC,MAAD,CAA1B,EAAoC,CAAC,KAAD,CAApC,CAAjB;AACD,SAJD,MAIO;AACLZ,UAAAA,KAAK,CAACJ,QAAN,GAAiBF,CAAC,CAACmB,YAAF,CACff,KAAK,CAACF,QADS,EAEf,CAACG,MAAM,CAACO,OAAP,CAAeF,IAAhB,CAFe,EAGf,IAHe,CAAjB;AAKD;;AACD;;AAEF,WAAK,wBAAL;AACE,cAAMU,GAAG,GAAGhB,KAAK,CAACF,QAAN,CAAeO,IAAf,CACTC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYN,MAAM,CAACO,OAAP,CAAeF,IAAf,CAAoBC,EADhC,CAAZ;AAIA,YAAI,CAAC,CAACS,GAAN,EACEd,KAAK,CAACJ,QAAN,GAAiBF,CAAC,CAACmB,YAAF,CACff,KAAK,CAACF,QADS,EAEf,CAACG,MAAM,CAACO,OAAP,CAAeF,IAAhB,CAFe,EAGf,IAHe,CAAjB;AAKF;;AACF;AAlDF;AAoDD,GArDa,CAAd;AAsDD","sourcesContent":["import produce from \"immer\";\nimport _ from \"lodash\";\n\nconst INITIAL_STATE = {\n  products: [],\n};\n\nexport default function cart(state = INITIAL_STATE, action) {\n  return produce(state, (draft) => {\n    switch (action.type) {\n      case \"@cart/ADD_TO_CART\":\n        let oneAdd = state.products.find(\n          (item) => item.id === action.payload.item.id\n        );\n\n        if (!!oneAdd) {\n          oneAdd.amount++;\n          const unionAdd = _.unionBy([oneAdd], state.products, \"id\");\n          draft.products = _.orderBy(unionAdd, [\"name\"], [\"asc\"]);\n        } else {\n          const unionAdd = _.unionBy(\n            [action.payload.item],\n            state.products,\n            \"id\"\n          );\n          draft.products = _.orderBy(unionAdd, [\"name\"], [\"asc\"]);\n        }\n        break;\n\n      case \"@cart/REMOVE_ONE_FROM_CART\":\n        let oneRemove = state.products.find(\n          (item) => item.id === action.payload.item.id\n        );\n\n        if (!!oneRemove && oneRemove.amount > 0) {\n          oneRemove.amount--;\n          const unionRemoveOne = _.unionBy([oneRemove], state.products, \"id\");\n          draft.products = _.orderBy(unionRemoveOne, [\"name\"], [\"asc\"]);\n        } else {\n          draft.products = _.differenceBy(\n            state.products,\n            [action.payload.item],\n            \"id\"\n          );\n        }\n        break;\n\n      case \"@cart/REMOVE_FROM_CART\":\n        const one = state.products.find(\n          (item) => item.id === action.payload.item.id\n        );\n\n        if (!!one)\n          draft.products = _.differenceBy(\n            state.products,\n            [action.payload.item],\n            \"id\"\n          );\n        break;\n      default:\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}